<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="collective.realestatebroker">
<body>

<metal:main fill-slot="main">
  <tal:main-macro metal:define-macro="main">

    <div tal:replace="structure provider:plone.abovecontenttitle" />

    <h1 class="documentFirstHeading" tal:content="context/title_or_id" />

    <div tal:replace="structure provider:plone.belowcontenttitle" />

    <div tal:replace="structure provider:plone.abovecontentbody" />

    
    <!-- simple search form -->
    
        <form action=""
              method="get"
              name="search"
              onsubmit="">


        <fieldset>

            <legend i18n:translate="legend_search_terms" id="legendSearch">Search Terms</legend>
            <div class="field">
                <label for="city" i18n:translate="label_brokersearch_city">City</label>
                <span class="fieldRequired" title="Required"
                      i18n:attributes="city"
                      i18n:translate="label_required">(Required)</span>
                <div class="formHelp" i18n:translate="help_brokersearch_city">Fill in the name of the city</div>
                <select id="city"
                       name="search_city"
                       tabindex=""
                       tal:attributes="tabindex tabindex/next;"
                       >
                <option tal:repeat="city view/available_cities"><span tal:replace="city"></span>
                </option>
                </select>
            </div>

            <div class="field">

          <table>
              <tr>
              <td>
                <label for="price" i18n:translate="label_min_price">Minimum price</label>
                <div class="formHelp" i18n:translate="help_search_price">
                </div>
                <select name="min_price:int"
                        id="min_price"
                        tabindex=""
                        tal:define="realestate_properties portal_properties/realestatebroker_properties;"
                        tal:attributes="tabindex tabindex/next;">
                    <option value="0" selected="selected">
                       <span tal:omit-tag=""
                             tal:define="realestate_properties portal_properties/realestatebroker_properties;"
                             tal:replace="realestate_properties/currency">currency</span> 0 </option>
                    <option tal:repeat="price realestate_properties/min_price"
                            tal:attributes="value price"> 
                        <span tal:omit-tag=""
                              tal:replace="realestate_properties/currency">currency</span> <span tal:omit-tag=""
                                                                                                 tal:replace="price">250</span>                    
                    </option>
                </select>
                </td>
                <td i18n:translate="broker_price_to"> to </td>
                <td>
                <label for="price" i18n:translate="label_max_price">Maximum price</label>
                <div class="formHelp" i18n:translate="help_search_price">

                </div>
                <select name="max_price:int"
                        id="max_price"
                        tabindex=""
                        tal:define="realestate_properties portal_properties/realestatebroker_properties;"
                        tal:attributes="tabindex tabindex/next;">
                    <option value="0" selected="selected" i18n:translate="broker_price_no_limit"> No Limit </option>
                    <option tal:repeat="price realestate_properties/max_price"
                            tal:attributes="value price"> 
                        <span tal:omit-tag=""
                              tal:replace="realestate_properties/currency">currency</span> <span tal:omit-tag=""
                                                                                                 tal:replace="price">250</span>                    
                    </option>
                </select>
                <input type="hidden" name="created_usage" value="range:min" />
                </td>

               </tr>
               </table> 
            </div>   

            <div class="formControls">
            <input type="hidden" name="portal_type" value="REHome" />
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="form.button.submit"
                       value="Search"
                       i18n:attributes="value"
                       tal:attributes="tabindex tabindex/next;"
                       />
            </div>

        </fieldset>

    </form>
    <metal:macro metal:use-macro="context/@@batch_widget/navigation" />


     <table id="sortable" 
         class="listing" 
         border="1"
         summary="Content listing" 
         cellpadding="0" cellspacing="0">

    <thead>
        <tr>
          <th class="nosort" i18n:translate="broker_photos">Photos</th>
          <th class="">&nbsp;<tal:address i18n:translate="broker_address"
              >Address</tal:address>&nbsp;</th>
          <th class="">&nbsp;<tal:price i18n:translate="broker_price"
              >Price</tal:price>&nbsp;</th>
          <th class="">&nbsp;<tal:status i18n:translate="broker_status"
              >Status</tal:status>&nbsp;</th>
        </tr>
    </thead>

      <tbody>
        <tr tal:condition="not: view/get_batched_folder_contents">
            <td colspan="4">No realestate found</td></tr>  
        <tr tal:repeat="item view/get_batched_folder_contents" tal:condition="view/get_batched_folder_contents">
          <td>
            <a href=""
               tal:attributes="href item/url"
               tal:condition="item/image_tag">
              <img src=""
                   tal:replace="structure item/image_tag" />
            </a>
            <span tal:omit-tag=""
                  tal:condition="not: item/image_tag">
              &nbsp;
            </span>
          </td>
          <td class="residential-listing-content">
            	<a hef="" tal:attributes="href item/url"><span tal:replace="item/title">Street 1</span><br/>
            	<span tal:replace="item/zipcode">1234 AB</span> <span tal:replace="item/city">Amsterdam</span></a>
          </td>
          <td>
              <span tal:replace="item/cooked_price"></span>
          </td>
          <td i18n:domain="plone">
            	<br><span i18n:translate="" tal:replace="item/review_state"></span>
          </td>
        </tr>
      </tbody>
    </table>

    <div tal:replace="structure provider:plone.belowcontentbody" />

    </tal:main-macro>
</metal:main>

</body>
</html>
